(this["webpackJsonpdeviate-calendar"]=this["webpackJsonpdeviate-calendar"]||[]).push([[0],{129:function(e){e.exports=JSON.parse('{"deviations":[{"type":"vab-day","label":"VAB","showInReport":true},{"type":"parental-leave-day","label":"F\xf6r\xe4ldraledig","showInReport":true},{"type":"sick-day","label":"Sjuk","showInReport":true},{"type":"aptitud-day","label":"Aptitud","showInReport":false},{"type":"vacay-day","label":"Semester","showInReport":true},{"type":"holiday-day","label":"Helgdag","showInReport":false},{"type":"other-day","label":"Annat","showInReport":false}]}')},134:function(e,t,a){e.exports=a(288)},259:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},27:function(e){e.exports=JSON.parse('{"clientId":"360129810083-p0bp29bb76ims1phc7u1s1ftsdql82ei.apps.googleusercontent.com","authUri":"https://accounts.google.com/o/oauth2/v2/auth","scopes":"https://www.googleapis.com/auth/gmail.send","sendMailUri":"https://www.googleapis.com/upload/gmail/v1/users/me/messages/send","redirectUri":"/oauth"}')},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"COLLEAGUE_CHANGED",(function(){return I})),a.d(n,"CUSTOMER_CHANGED",(function(){return R})),a.d(n,"ACCOUNT_CHANGED",(function(){return H})),a.d(n,"PRICERATE_CHANGED",(function(){return M})),a.d(n,"WORKHOURS_CHANGED",(function(){return _})),a.d(n,"EMAIL_CHANGED",(function(){return T}));var r={};a.r(r),a.d(r,"loadDatesAction",(function(){return Z})),a.d(r,"reportDeviation",(function(){return $})),a.d(r,"clearDeviation",(function(){return ee})),a.d(r,"reportVABAction",(function(){return te})),a.d(r,"reportSicknessAction",(function(){return ae})),a.d(r,"reportVacationAction",(function(){return ne})),a.d(r,"reportAptitudDayAction",(function(){return re})),a.d(r,"clearVABAction",(function(){return oe})),a.d(r,"clearSicknessAction",(function(){return le})),a.d(r,"clearVacationAction",(function(){return ce})),a.d(r,"clearAptitudDayAction",(function(){return ie}));var o={};a.r(o),a.d(o,"sendMessage",(function(){return _e}));var l=a(0),c=a.n(l),i=a(119),u=a.n(i),s=a(13),d=a(20),p=a(42),m=a(126),h=a(127),f=a.n(h),g=a(26),y=a(128),v=a.n(y),b=a(12),E=function(e){var t=e.getMonth()+1,a=e.getFullYear();return new Date(a,t,0).getDate()},O=function(e,t,a){var n=new Date(e,t,a),r=""+(n.getMonth()+1),o=""+n.getDate(),l=n.getFullYear();return r.length<2&&(r="0"+r),o.length<2&&(o="0"+o),[l,r,o].join("-")},w=function(e){var t=new Date(e);return O(t.getFullYear(),t.getMonth(),t.getDate())},j=function(e){return!!e&&(0===e.getDay()||6===e.getDay())},k=function(e,t){return!!t&&t.filter((function(t){return w(t)===w(e)})).length>0},N=function(e,t){return!!t&&t.filter((function(t){return w(t)!==w(e)}))},C=function(e,t,a){return a?a.filter((function(a){return new Date(a).getFullYear()===e&&new Date(a).getMonth()===t})).map((function(e,t){return w(e)})).sort():[]},D=function(e){var t=e.date,a=t.getMonth(),n=t.getFullYear(),r=E(t),o=[],l=function(e){var t=e.getFullYear(),a=e.getMonth(),n=[],r=0;switch(new Date(t,a,1).getDay()){case 1:r=-1;break;case 2:r=0;break;case 3:r=1;break;case 4:r=2;break;case 5:r=3;break;case 6:r=4;break;default:r=5}for(var o=E(new Date(t,a-1,1)),l=o-r;l<=o;l++){var c=new Date(t,a-1,l);j(c)?n.push({type:"other-month-weekend",date:c}):n.push({type:"other-month-day",date:c})}return n}(t),c=function(e){for(var t=e.getFullYear(),a=e.getMonth(),n=E(e),r=new Date(t,a,n).getDay(),o=[],l=1;l<=7-r;l++){var c=new Date(t,a,n);c.setDate(c.getDate()+l),j(c)?o.push({type:"other-month-weekend",date:c}):o.push({type:"other-month-day",date:c})}return o}(t);o=o.concat(l);for(var i=1;i<=r;i++){var u=new Date(n,a,i),s=!1;if(e.deviations)for(var d=0;!1===s&&d<e.deviations.length;){var p=e.deviations[d].type,m=e.deviations[d].label,h=e[p];h&&k(u,h)&&(o.push({type:p,label:m,date:u}),s=!0),d++}s||(j(u)?o.push({type:"weekend",date:u}):o.push({type:"workday",date:u}))}return o=o.concat(c)},A="deviate-calendar/Calendar/LOAD_DATES",S="deviate-calendar/Calendar/REPORT_DEVIATION",x="deviate-calendar/Calendar/CLEAR_DEVIATION",I="deviate-calendar/Information/COLLEAGUE_CHANGED",R="deviate-calendar/Information/CUSTOMER_CHANGED",H="deviate-calendar/Information/ACCOUNT_CHANGED",M="deviate-calendar/Information/PRICERATE_CHANGED",_="deviate-calendar/Information/WORKHOURS_CHANGED",T="deviate-calendar/Information/EMAIL_CHANGED",F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case I:return Object(b.a)({},e,{colleague:t.payload.colleague});case R:return Object(b.a)({},e,{customer:t.payload.customer});case H:return Object(b.a)({},e,{account:t.payload.account});case M:return Object(b.a)({},e,{pricerate:t.payload.pricerate});case _:return Object(b.a)({},e,{workHours:t.payload.workHours});case T:return Object(b.a)({},e,{email:t.payload.email});default:return e}},V=a(3),L=a(4),U=a(6),P=a(5),Y=a(7),G=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("info").scrollIntoView()}},{key:"render",value:function(){var e=this.props,t=e.colleague,a=e.customer,n=e.account,r=e.pricerate,o=e.workHours,l=e.email,i=e.colleagueChanged,u=e.customerChanged,s=e.accountChanged,d=e.pricerateChanged,p=e.workHoursChanged,m=e.emailChanged;return c.a.createElement("div",{id:"info",className:"col-xs-12 box"},c.a.createElement("div",{className:"form-group col-xs-12 col-sm-12 col-md-6"},c.a.createElement("label",{htmlFor:"colleague"},"Kollega"),c.a.createElement("input",{type:"text",defaultValue:t,id:"colleague",className:"form-control",onChange:i}),c.a.createElement("label",{htmlFor:"customer"},"Kund"),c.a.createElement("input",{type:"text",defaultValue:a,id:"customer",className:"form-control",onChange:u}),c.a.createElement("label",{htmlFor:"workHours"},"Arbetstid"),c.a.createElement("input",{type:"text",defaultValue:o,id:"workHours",className:"form-control",onChange:p})),c.a.createElement("div",{className:"form-group col-xs-12 col-sm-12 col-md-6"},c.a.createElement("label",{htmlFor:"account"},"Konto"),c.a.createElement("input",{type:"text",defaultValue:n,id:"account",className:"form-control",onChange:s}),c.a.createElement("label",{htmlFor:"pricerate"},"Pris"),c.a.createElement("input",{type:"text",defaultValue:r,id:"pricerate",className:"form-control",onChange:d}),c.a.createElement("label",{htmlFor:"email"},"E-postadress att skicka tidrapport till"),c.a.createElement("input",{type:"text",defaultValue:l,id:"email",className:"form-control",onChange:m})))}}]),t}(l.Component),K=Object(s.connect)((function(e){return{colleague:e.info.colleague,customer:e.info.customer,account:e.info.account,pricerate:e.info.pricerate,workHours:e.info.workHours,email:e.info.email}}),(function(e){return{colleagueChanged:function(t){return e((a=t.target.value,{type:I,payload:{colleague:a}}));var a},customerChanged:function(t){return e((a=t.target.value,{type:R,payload:{customer:a}}));var a},accountChanged:function(t){return e((a=t.target.value,{type:H,payload:{account:a}}));var a},pricerateChanged:function(t){return e((a=parseInt(t.target.value,10),{type:M,payload:{pricerate:a}}));var a},workHoursChanged:function(t){return e((a=parseInt(t.target.value,10),{type:_,payload:{workHours:a}}));var a},emailChanged:function(t){return e((a=t.target.value,{type:T,payload:{email:a}}));var a}}}))(G),B=a(129),J=function(e){for(var t=e.date,a=e.workHours,n=t.getMonth(),r=t.getFullYear(),o=0,l=1;l<=E(t);l++){var c=new Date(r,n,l),i=!1;if(e.deviations)for(var u=0;!1===i&&u<e.deviations.length;){var s=e[e.deviations[u].type];s&&k(c,s)&&(o-=a,i=!0),u++}!i&&j(c)||(o+=a)}return o},W=function(e){return O(e.getFullYear(),e.getMonth(),1)},z=function(e){return O(e.getFullYear(),e.getMonth(),E(e))},q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.date,r=e.type,o=Object(b.a)({},t);if(t[r]){var l=a?N(n,t[r]):t[r].concat(n);o[r]=l}else o[r]=[n];return o.date=n,Object(b.a)({},o,{billableHours:J(o),daysInMonth:D(o)})},Q={weekdays:["M\xe5n","Tis","Ons","Tor","Fre","L\xf6r","S\xf6n"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],workHours:0,deviations:B.deviations},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case A:var a=Object(b.a)({},e,{date:t.payload.date});return Object(b.a)({},e,{date:t.payload.date,numberOfDaysInMonth:E(t.payload.date),formattedStartDate:W(t.payload.date),formattedEndDate:z(t.payload.date),billableHours:J(a),daysInMonth:D(a)});case S:return q(t.payload,e);case x:return q(t.payload,e,!0);case n.WORKHOURS_CHANGED:var r=Object(b.a)({},e,{workHours:t.payload.workHours});return Object(b.a)({},r,{billableHours:J(r)});default:return e}},Z=function(e){return{type:A,payload:{date:e}}},$=function(e,t){return{type:S,payload:{date:e,type:t}}},ee=function(e,t){return{type:x,payload:{date:e,type:t}}},te=function(e){return{type:"deviate-calendar/Calendar/REPORT_VAB",payload:{date:e}}},ae=function(e){return{type:"deviate-calendar/Calendar/REPORT_SICKNESS",payload:{date:e}}},ne=function(e){return{type:"deviate-calendar/Calendar/REPORT_VACATION",payload:{date:e}}},re=function(e){return{type:"deviate-calendar/Calendar/REPORT_APTITUDDAY",payload:{date:e}}},oe=function(e){return{type:"deviate-calendar/Calendar/CLEAR_VAB",payload:{date:e}}},le=function(e){return{type:"deviate-calendar/Calendar/CLEAR_SICKNESS",payload:{date:e}}},ce=function(e){return{type:"deviate-calendar/Calendar/CLEAR_VACATION",payload:{date:e}}},ie=function(e){return{type:"deviate-calendar/Calendar/CLEAR_APTITUDDAY",payload:{date:e}}},ue=(a(259),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).pad=function(e){return e<10?"0"+e:e},a}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.index;return c.a.createElement("li",{id:"day-"+a,className:"col-sm-1 weekend-day"},c.a.createElement("span",{className:"text-muted"},this.pad(t.getDate())))}}]),t}(l.Component)),se=(a(260),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).pad=function(e){return e<10?"0"+e:e},a}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.index,n=e.reportDeviation,r=e.deviations;return c.a.createElement("li",{className:"col-sm-1 work-day"},c.a.createElement("div",{className:"dropdown col-sm-12"},c.a.createElement("div",{id:"day-"+a,"data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},this.pad(t.getDate())),c.a.createElement("ul",{className:"dropdown-menu",id:"dropdown-menu-"+a,"aria-labelledby":"day-"+a},c.a.createElement("li",{className:"dropdown-header"},"Avvikelser"),r&&r.map((function(e,a){return c.a.createElement("li",{key:a},c.a.createElement("a",{href:"#",onClick:function(){return n(t,e.type)}},e.label))})))))}}]),t}(l.Component)),de=Object(s.connect)((function(e){return{deviations:e.calendar.deviations}}),(function(e){return{reportDeviation:function(t,a){return e($(t,a))}}}))(se),pe=a(130),me=a.n(pe),he=(a(262),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).pad=function(e){return e<10?"0"+e:e},a.updateDeviation=function(e,t,a,n,r){for(var o=0;o<a.length;o++)e===o+1?n(t.date,a[o].type):r(t.date,a[o].type)},a.getDeviation=function(e,t){if(!t)return null;var a=t.filter((function(t){return t.type===e.type}));return a?a[0]:null},a.getClassName=function(e){return e?"col-sm-1 ".concat(e.type):"col-sm-1 work-day"},a.getStartSlide=function(e,t){if(!t)return 0;for(var a=0;a<t.length;a++)if(t[a].type===e.type)return a+1;return 0},a}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.payload,n=t.reportDeviation,r=t.clearDeviation,o=t.deviations,l=this.getStartSlide(a,o),i=this.getDeviation(a,o);return c.a.createElement("li",{className:this.getClassName(i),onClick:function(){return e.updateDeviation(0,a,o,n,r)}},c.a.createElement(me.a,{className:"carousel",swipeOptions:{continuous:!0,startSlide:l,disableScroll:!0,stopPropagation:!0,callback:function(t,l){return e.updateDeviation(t,a,o,n,r)}},key:"startslide-"+l+"-"+a.date},c.a.createElement("div",null,c.a.createElement("span",null,this.pad(a.date.getDate()))),o&&o.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("span",null,e.label))}))))}}]),t}(l.Component)),fe=Object(s.connect)((function(e){return{deviations:e.calendar.deviations}}),(function(e){return{reportDeviation:function(t,a){return e($(t,a))},clearDeviation:function(t,a){return e(ee(t,a))}}}))(he),ge=(a(263),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(U.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).pad=function(e){return e<10?"0"+e:e},a}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.value,n=e.type,r="col-sm-1 ".concat(n),o="-"===a?new Date:a;return c.a.createElement("li",{id:"day-"+t,className:r},c.a.createElement("span",{className:"text-muted"},this.pad(o.getDate())))}}]),t}(l.Component)),ye=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.addMonth,n=t.getMonth(),r=t.getFullYear(),o=new Date(r,n+1,1);return c.a.createElement("li",{className:"col-xs-2 col-sm-1 month",onClick:function(){return a(o)}},">")}}]),t}(l.Component),ve=Object(s.connect)((function(e){return{date:e.calendar.date}}),(function(e){return{addMonth:function(t){return e(Z(t))}}}))(ye),be=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.subMonth,n=t.getMonth(),r=t.getFullYear(),o=new Date(r,n-1,1);return c.a.createElement("li",{className:"col-xs-2 col-sm-1 month",onClick:function(){return a(o)}},"<")}}]),t}(l.Component),Ee=Object(s.connect)((function(e){return{date:e.calendar.date}}),(function(e){return{subMonth:function(t){return e(Z(t))}}}))(be),Oe=(a(264),function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.payload,a=e.index,n=e.clearDeviation,r="col-sm-1 ".concat(t.type);return c.a.createElement("li",{id:"day-"+a,className:r,onClick:function(){return n(t.date,t.type)}},c.a.createElement("span",null,t.label))}}]),t}(l.Component)),we=Object(s.connect)((function(e){return{}}),(function(e){return{clearDeviation:function(t,a){return e(ee(t,a))}}}))(Oe),je=(a(265),function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.weekdays,n=e.months,r=e.daysInMonth,o=t.getMonth(),l=t.getFullYear();return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("ul",{className:"months col-xs-12 col-sm-12"},c.a.createElement(Ee,null),c.a.createElement("li",{className:"col-xs-8 col-sm-5 month"},n[o]," - ",l),c.a.createElement(ve,null))),c.a.createElement("div",{className:"row"},c.a.createElement("ul",{className:"weekdays col-xs-12 col-sm-12"},a.map((function(e,t){return c.a.createElement("li",{className:"weekday col-sm-1 hidden-xs",key:t},e)})))),c.a.createElement("div",{className:"row"},c.a.createElement("ul",{className:"days visible-xs col-xs-12"},r.map((function(e,t){switch(e.type){case"weekend":return c.a.createElement(ue,{value:e.date,key:t,index:t});case"other-month-day":case"other-month-weekend":return c.a.createElement(ge,{key:t,index:t,type:e.type,value:e.date});default:return c.a.createElement(fe,{key:t,index:t,payload:Object(b.a)({},e)})}})))),c.a.createElement("div",{className:"row"},c.a.createElement("ul",{className:"days hidden-xs col-sm-12"},r.map((function(e,t){switch(e.type){case"weekend":return c.a.createElement(ue,{value:e.date,key:t,index:t});case"workday":return c.a.createElement(de,{value:e.date,key:t,index:t});case"other-month-day":case"other-month-weekend":return c.a.createElement(ge,{key:t,index:t,type:e.type,value:e.date});default:return c.a.createElement(we,{key:t,index:t,payload:Object(b.a)({},e)})}})))))}}]),t}(l.Component)),ke=Object(s.connect)((function(e){return{date:e.calendar.date,weekdays:e.calendar.weekdays,months:e.calendar.months,daysInMonth:e.calendar.daysInMonth}}),(function(e){return{}}))(je),Ne=function(e,t,a){var n=new Date;n.setSeconds(n.getSeconds()+a);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},Ce=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},De=function(e){if(e){var t=/access_token=(.+)&token_type=Bearer&expires_in=(\d+)/g.exec(e);return t&&3===t.length?{access_token:t[1],expires:t[2]}:void 0}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showSpinner:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"Authorize":var a=Ce("deviate-calendar");return a?Object(b.a)({},e,{id:a}):Object(b.a)({},e);case"Authenticated":var n=De(t.payload);return Ne("deviate-calendar",n.access_token,parseInt(n.expires,10)),window.location.href=window.location.origin+"/deviate-calendar/",Object(b.a)({},e,{id:n.access_token});case"ShowSpinner":return Object(b.a)({},e,{showSpinner:!0});case"HideSpinner":return Object(b.a)({},e,{showSpinner:!1});default:return Object(b.a)({},e)}},Se=a(77),xe=a.n(Se),Ie=a(131),Re=a.n(Ie),He=a(27),Me=function(e,t){window.dataLayer&&window.dataLayer.push({eventCategory:"deviate-calendar",eventAction:e,eventLabel:t,event:"genericTrackEvent"})},_e=function(e,t,a,n,r){var o=xe.a.factory({contentType:"multipart/mixed",body:[]});o.header("to",t),o.header("subject",a);var l=xe.a.factory({contentType:"text/html;charset=utf-8",body:n});o.body.push(l);var c={method:"POST",headers:{Authorization:"Bearer "+Ce("deviate-calendar"),"Content-Type":"message/rfc822"},body:o.toString()};Re()(He.sendMailUri,c).then((function(a){if(e(),a.status>=400)throw Me("send e-mail","failed|".concat(t,"|").concat(r)),new Error("Bad response from Google");Me("send e-mail","success|".concat(t,"|").concat(r))})).catch((function(e){return console.log(e.message)}))},Te=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.body,n=e.okLabel,r=e.okAction;return c.a.createElement("div",{id:"myModal",className:"modal fade",tabIndex:"-1",role:"dialog"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7")),c.a.createElement("h4",{className:"modal-title"},t)),c.a.createElement("div",{className:"modal-body"},c.a.createElement("p",null,a)),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){return r()}},n),c.a.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Avbryt")))))}}]),t}(l.Component),Fe=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("redux"));return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"well"},c.a.createElement("button",{type:"button",className:"btn btn-danger","data-toggle":"modal","data-target":"#myModal"},"Nollst\xe4ll data"),c.a.createElement(Te,{title:"Nollst\xe4ll data",body:"Nollst\xe4ll kommer att rensa allt data du har matat in n\xe5gonsin",okLabel:"Nollst\xe4ll data",okAction:function(){return localStorage.removeItem("redux")}})),c.a.createElement("h3",null,"Nuvarande data"),c.a.createElement("div",{className:"well well-lg"},c.a.createElement("pre",null,JSON.stringify(e,null,2)))))}}]),t}(l.Component),Ve=a(132),Le=a.n(Ve),Ue=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){console.log("Login page rendered");var e=He.authUri,t=He.scopes,a=window.location.origin+"/deviate-calendar"+He.redirectUri,n=He.clientId,r="".concat(e,"?scope=").concat(t,"&redirect_uri=").concat(a,"&response_type=token&client_id=").concat(n);return console.log("Login page rendered",r),c.a.createElement(Le.a,{location:r})}}]),t}(l.Component),Pe=function(e){function t(){return Object(V.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return console.log("OAuth page rendered"),(0,this.props.authenticate)(this.props.location.hash),console.log("OAuth page rendered",this.props.location.hash),c.a.createElement("div",{className:"container"})}}]),t}(l.Component),Ye=Object(s.connect)((function(e){return{}}),(function(e){return{authenticate:function(t){return e({type:"Authenticated",payload:t})}}}))(Pe),Ge=a(133),Ke=a.n(Ge),Be=(a(286),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(U.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).createHtmlReport=function(e,t,a){var n=e.date.getFullYear(),r=e.date.getMonth(),o='<th style="text-align: left;">',l='<td style="text-align: left;">',c=[];c[0]='<table style="width: 100%;border-collapse: collapse;font-family: arial, sans-serif;"><tbody>',c[c.length]="<tr>",c[c.length]=o,c[c.length]="Kollega",c[c.length]="</th>",c[c.length]='<th colspan="4" style="text-align: left;">',c[c.length]="Period",c[c.length]="</th>",c[c.length]="</tr>",c[c.length]="<tr>",c[c.length]=l,c[c.length]=t.colleague,c[c.length]="</td>",c[c.length]='<td colspan="4" style="text-align: left;">',c[c.length]="".concat(e.formattedStartDate," -> ").concat(e.formattedEndDate),c[c.length]="</td>",c[c.length]="</tr>",c[c.length]="<tr><td>&nbsp;</td></tr>",c[c.length]="<tr>",c[c.length]=o,c[c.length]="Kund",c[c.length]="</th>",c[c.length]=o,c[c.length]="Konto",c[c.length]="</th>",c[c.length]=o,c[c.length]="Timmar",c[c.length]="</th>",c[c.length]=o,c[c.length]="Pris",c[c.length]="</th>",c[c.length]=o,c[c.length]="Summa",c[c.length]="</th>",c[c.length]="</tr>",c[c.length]="<tr>",c[c.length]=l,c[c.length]=t.customer,c[c.length]="</td>",c[c.length]=l,c[c.length]=t.account,c[c.length]="</td>",c[c.length]=l,c[c.length]=e.billableHours,c[c.length]="</td>",c[c.length]=l,c[c.length]=t.pricerate,c[c.length]="</th>",c[c.length]=l,c[c.length]=e.billableHours*t.pricerate,c[c.length]="</td>",c[c.length]="</tr>",a&&a.map((function(t,a){var o=t.type,l=e[o],i=C(n,r,l);i.length>0&&(c[c.length]="<tr><td>&nbsp;</td></tr>",c[c.length]="<tr>",c[c.length]='<th colspan="3" style="text-align: left;">',c[c.length]="".concat(t.label," - totalt ").concat(i.length," dag(ar)"),c[c.length]="</th>",c[c.length]="</tr>",i.map((function(e,t){c[c.length]="<tr>",c[c.length]='<td colspan="3" style="text-align: left;">',c[c.length]=w(e),c[c.length]="</td>",c[c.length]="</tr>"})))}));for(var i="",u=0;u<c.length;u++)i+=c[u];return i+="</tbody><table>",i+='<br/>Skickat med <a href="https://deviate-calendar.herokuapp.com/">deviate-calendar</a>'},a.sendEmail=function(e,t,a,n,r,l){e(),o.sendMessage(t,a,n,r,l)},a}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("report").scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.props,a=t.calendar,n=t.info,r=t.showSpinner,o=t.hideSpinner,l=n.pricerate*a.billableHours,i=a.date.getFullYear(),u=a.date.getMonth(),s=a.deviations.filter((function(e){return!0===e.showInReport})),d="Tidrapport perioden ".concat(a.formattedStartDate," -> ").concat(a.formattedEndDate),p=this.createHtmlReport(a,n,s);return c.a.createElement("div",{id:"report",className:"col-xs-12 box"},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-borderless table-condensed"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",{colSpan:"1"},"Kollega"),c.a.createElement("th",{colSpan:"2"},"Period")),c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"1"},n.colleague),c.a.createElement("td",{colSpan:"2"},a.formattedStartDate," -> ",a.formattedEndDate)),c.a.createElement("tr",null,c.a.createElement("th",{colSpan:"1"},"Kund"),c.a.createElement("th",{colSpan:"1"},"Konto"),c.a.createElement("th",{colSpan:"1"},"Timmar"),c.a.createElement("th",{colSpan:"1"},"Pris"),c.a.createElement("th",{colSpan:"1"},"Summa")),c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"1"},n.customer),c.a.createElement("td",{colSpan:"1"},n.account),c.a.createElement("td",{colSpan:"1"},a.billableHours),c.a.createElement("td",{colSpan:"1"},n.pricerate),c.a.createElement("td",{colSpan:"1"},l)),s&&s.map((function(e,t){var n=e.type,r=a[n];if(!r)return null;var o=C(i,u,r);return o&&o.length>0?[c.a.createElement("tr",{key:n+"-header-"+t},c.a.createElement("th",{colSpan:"2"},e.label," - totalt ",o.length," dag(ar)")),o.map((function(e,t){return[c.a.createElement("tr",{key:n+"-details-"+t},c.a.createElement("td",{colSpan:"2"},w(e)))]}))]:null}))))),c.a.createElement("div",{className:"col-xs-12"},n&&n.email&&c.a.createElement("input",{type:"button",className:"margin-bottom btn btn-primary",value:"Skicka tidrapport",onClick:function(){return e.sendEmail(r,o,n.email,d,p,n.colleague)}})))}}]),t}(l.Component)),Je=Object(s.connect)((function(e){return{calendar:e.calendar,info:e.info}}),(function(e){return{showSpinner:function(){return e({type:"ShowSpinner"})},hideSpinner:function(){return e({type:"HideSpinner"})}}}))(Be),We=function(e){function t(){var e;return Object(V.a)(this,t),(e=Object(U.a)(this,Object(P.a)(t).call(this))).toggleInfo=function(){e.setState({showInfo:!e.state.showInfo})},e.toggleReport=function(){e.setState({showReport:!e.state.showReport}),e.state.showReport&&document.body.scrollIntoView()},e.state={showInfo:!1,showReport:!1},e}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showSpinner,a=e.info,n=this.state.showReport,r=this.state.showInfo;return c.a.createElement("div",{className:"container"},t&&c.a.createElement(Ke.a,{spinnerName:"spinner",noFadeIn:!0}),c.a.createElement("div",{className:"row"},c.a.createElement(ke,null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xs-12 col-sm-7 col-sm-offset-0"},c.a.createElement("div",{className:"box-header pointer",onClick:this.toggleInfo},!r&&c.a.createElement("span",null,"Visa personuppgifter"),!r&&c.a.createElement("span",{className:"pull-right"},c.a.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),r&&c.a.createElement("span",null,"D\xf6lj personuppgifter"),r&&c.a.createElement("span",{className:"pull-right"},c.a.createElement("i",{className:"glyphicon glyphicon-chevron-down"}))),r&&c.a.createElement(K,null))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xs-12 col-sm-7 col-sm-offset-0"},c.a.createElement("div",{className:"box-header pointer",onClick:this.toggleReport},!n&&c.a.createElement("span",null,"Visa tidrapport"),!n&&c.a.createElement("span",{className:"pull-right"},c.a.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),n&&c.a.createElement("span",null,"D\xf6lj tidrapport"),n&&c.a.createElement("span",{className:"pull-right"},c.a.createElement("i",{className:"glyphicon glyphicon-chevron-down"}))),n&&c.a.createElement(Je,null)))),c.a.createElement("input",{id:"welcome",type:"hidden",value:a.colleague}))}}]),t}(l.Component),ze=Object(s.connect)((function(e){return{info:e.info,showSpinner:e.application.showSpinner}}))(We),qe=(a(287),document.getElementById("mount")),Qe=Object(p.routerMiddleware)(d.c),Xe=Object(g.applyMiddleware)(Qe,f()()),Ze=Object(g.compose)(Xe,v()(["info","calendar"],{})),$e=Object(g.combineReducers)({routing:p.routerReducer,calendar:X,info:F,application:Ae}),et=Object(g.createStore)($e,{},Ze),tt=Object(p.syncHistoryWithStore)(d.c,et);try{et.dispatch({type:"Authorize"}),et.dispatch(r.loadDatesAction(new Date))}catch(nt){console.log(nt.message)}var at=Object(m.UserAuthWrapper)({authSelector:function(e){return e.application},predicate:function(e){return e&&e.id},redirectAction:p.routerActions.replace,failureRedirectPath:"/deviate-calendar/login",wrapperDisplayName:"UserIsAuthenticated",allowRedirectBack:!1});u.a.render(c.a.createElement(s.Provider,{store:et},c.a.createElement(d.b,{history:tt},c.a.createElement(d.a,{path:"/",component:at(ze)}),c.a.createElement(d.a,{path:"/deviate-calendar/",component:at(ze)}),c.a.createElement(d.a,{path:"/deviate-calendar/login",component:Ue}),c.a.createElement(d.a,{path:"/deviate-calendar/oauth",component:Ye}),c.a.createElement(d.a,{path:"/oauth",component:Ye}),c.a.createElement(d.a,{path:"/deviate-calendar/state",component:Fe}))),qe);t.default=et}},[[134,1,2]]]);
//# sourceMappingURL=main.c2d4789e.chunk.js.map